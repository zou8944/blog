<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"zou8944.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.8.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
<meta property="og:type" content="website">
<meta property="og:title" content="果冻 | Jelly">
<meta property="og:url" content="https://zou8944.com/page/5/index.html">
<meta property="og:site_name" content="果冻 | Jelly">
<meta property="og:description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="果冻 | Jelly">
<meta property="article:tag" content="果冻 博客">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://zou8944.com/page/5/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>果冻 | Jelly</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">果冻 | Jelly</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">果冻的碎碎念</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">果冻 | Jelly</p>
  <div class="site-description" itemprop="description">Beat Jelly; Hit Jelly; Kill Jelly.</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">78</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/Kubernetes%E5%88%9D%E6%8E%A2%20-%20%E6%A6%82%E8%A7%88-kubernetes%E5%88%9D%E6%8E%A2-%E6%A6%82%E8%A7%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Kubernetes%E5%88%9D%E6%8E%A2%20-%20%E6%A6%82%E8%A7%88-kubernetes%E5%88%9D%E6%8E%A2-%E6%A6%82%E8%A7%88/" class="post-title-link" itemprop="url">Kubernetes初探 - 概览</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-10-21 20:28:01" itemprop="dateCreated datePublished" datetime="2019-10-21T20:28:01+08:00">2019-10-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:25:21" itemprop="dateModified" datetime="2021-02-16T23:25:21+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AE%B9%E5%99%A8/" itemprop="url" rel="index"><span itemprop="name">容器</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Kubernetes是一个软件系统， 允许部署和管理<strong>容器化</strong>的应用。使用该系统，用户不需要关心如何维护实体集群关系，也不用徒手部署应用，不必烦恼应用的运行状态，只需要按照系统说明编写描述信息，k8s会按照描述信息自动维护整个集群。对用户，k8s将维护和部署集群化应用的复杂过程隐藏起来并进行了抽象，使得开发者能够更加专注于应用的开发上。同时减轻了运维人员的工作压力</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/Kubernetes%E5%88%9D%E6%8E%A2%20-%20%E6%A6%82%E8%A7%88-kubernetes%E5%88%9D%E6%8E%A2-%E6%A6%82%E8%A7%88/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC%20-%20SockJS-%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC-sockjs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC%20-%20SockJS-%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC-sockjs/" class="post-title-link" itemprop="url">技术巡礼 - SockJS</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-10-13 16:21:04" itemprop="dateCreated datePublished" datetime="2019-10-13T16:21:04+08:00">2019-10-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:25:31" itemprop="dateModified" datetime="2021-02-16T23:25:31+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC/" itemprop="url" rel="index"><span itemprop="name">技术巡礼</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>想要写一篇介绍SockJS的文章，又不知道写什么好，发现官方github项目上这篇文章比较好，于是直接翻译过来。不长不短，正好合适。<br>该文章发布于2016年，某些论述可能已经过时，这里尝试加以纠正，但有谬误，还请指正。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC%20-%20SockJS-%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC-sockjs/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC%20-%20Angular%20%E5%92%8C%20Vue%20%E5%92%8C%20React-%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC-angular%E5%92%8Cvue%E5%92%8Creact/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC%20-%20Angular%20%E5%92%8C%20Vue%20%E5%92%8C%20React-%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC-angular%E5%92%8Cvue%E5%92%8Creact/" class="post-title-link" itemprop="url">技术巡礼 - Angular 和 Vue 和 React</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-10-13 16:20:57" itemprop="dateCreated datePublished" datetime="2019-10-13T16:20:57+08:00">2019-10-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:25:45" itemprop="dateModified" datetime="2021-02-16T23:25:45+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC/" itemprop="url" rel="index"><span itemprop="name">技术巡礼</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>我是前端菜鸟，并不知道这三个是啥玩意儿，只是查查资料，让自己稍微了解一些。顺便说，这篇文章都是从别的地方抄来的。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC%20-%20Angular%20%E5%92%8C%20Vue%20%E5%92%8C%20React-%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC-angular%E5%92%8Cvue%E5%92%8Creact/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC%20-%20Akka%E5%92%8CLightend-%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC-akka%E5%92%8Clightend/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC%20-%20Akka%E5%92%8CLightend-%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC-akka%E5%92%8Clightend/" class="post-title-link" itemprop="url">技术巡礼 - Akka和Lightend</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-25 22:33:16" itemprop="dateCreated datePublished" datetime="2019-09-25T22:33:16+08:00">2019-09-25</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:25:55" itemprop="dateModified" datetime="2021-02-16T23:25:55+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC/" itemprop="url" rel="index"><span itemprop="name">技术巡礼</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>akka这个技术一致都在听人弹起，只知道它与后端有关，是一个牛B的框架，别的么。。。并不知道。那么，我觉得现在是时候了解一下了。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC%20-%20Akka%E5%92%8CLightend-%E6%8A%80%E6%9C%AF%E5%B7%A1%E7%A4%BC-akka%E5%92%8Clightend/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8E%A8%E8%8D%90-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8E%A8%E8%8D%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8E%A8%E8%8D%90-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8E%A8%E8%8D%90/" class="post-title-link" itemprop="url">推荐系统-基于用户行为数据的推荐</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-13 11:41:06" itemprop="dateCreated datePublished" datetime="2019-09-13T11:41:06+08:00">2019-09-13</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:26:14" itemprop="dateModified" datetime="2021-02-16T23:26:14+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">算法 | 推荐系统</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="基于用户行为的理由"><a href="#基于用户行为的理由" class="headerlink" title="基于用户行为的理由"></a>基于用户行为的理由</h1><h2 id="让用户直接说不就好了吗"><a href="#让用户直接说不就好了吗" class="headerlink" title="让用户直接说不就好了吗"></a>让用户直接说不就好了吗</h2><p>本文标题是利用用户的数据行为, 是根据用户的实际动作进行演算的方法, 那为什么不利用用户语言进行演算呢? 最大的原因就是用户也说不清楚自己到底喜欢什么, 而用户的实际行为往往能够暴露其真实想法, 有些想法用户自己可能都还没有意识到.</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8E%A8%E8%8D%90-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8E%A8%E8%8D%90/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%20-%20%E6%A6%82%E8%BF%B0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E6%A6%82%E8%BF%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%20-%20%E6%A6%82%E8%BF%B0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E6%A6%82%E8%BF%B0/" class="post-title-link" itemprop="url">推荐系统 - 概述</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-08 12:03:04" itemprop="dateCreated datePublished" datetime="2019-09-08T12:03:04+08:00">2019-09-08</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:26:22" itemprop="dateModified" datetime="2021-02-16T23:26:22+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%AE%97%E6%B3%95-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">算法 | 推荐系统</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="什么是推荐系统"><a href="#什么是推荐系统" class="headerlink" title="什么是推荐系统"></a>什么是推荐系统</h1><p>推荐系统让用户能够发现对自己有价值的信息，另一方面，能够让信息展现在对它感兴趣的用户面前。实现消费者和生产者的双赢。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F%20-%20%E6%A6%82%E8%BF%B0-%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F-%E6%A6%82%E8%BF%B0/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/RxJava%E5%88%9D%E6%8E%A2-rxjava%E5%88%9D%E6%8E%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/RxJava%E5%88%9D%E6%8E%A2-rxjava%E5%88%9D%E6%8E%A2/" class="post-title-link" itemprop="url">RxJava初探</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-08 11:00:21" itemprop="dateCreated datePublished" datetime="2019-09-08T11:00:21+08:00">2019-09-08</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:26:30" itemprop="dateModified" datetime="2021-02-16T23:26:30+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%93%8D%E5%BA%94%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">响应式</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Observable"><a href="#Observable" class="headerlink" title="Observable"></a>Observable</h2><p> ReactiveX中, 应用的是观察者模式, 一个观察者订阅一个被观察者. 然后该观察者根据被观察者释放的任何信息进行反应. 这样能够使得并发称为可能, 观察者不必阻塞等待被观察者的响应内容, 而是创建一个哨兵, 并随时准备在未来的任何时候响应被观察者释放出的内容<br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/RxJava%E5%88%9D%E6%8E%A2-rxjava%E5%88%9D%E6%8E%A2/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/Common%20FileUpload%E4%BB%8B%E7%BB%8D-commonfileupload%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Common%20FileUpload%E4%BB%8B%E7%BB%8D-commonfileupload%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">Common FileUpload介绍</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-07 22:31:33" itemprop="dateCreated datePublished" datetime="2019-09-07T22:31:33+08:00">2019-09-07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:26:39" itemprop="dateModified" datetime="2021-02-16T23:26:39+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%B7%A5%E5%85%B7/" itemprop="url" rel="index"><span itemprop="name">工具</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>这是一篇半翻译半笔记式的文章，如果你之前对Common FileUpload了解不多，本文可以快速了解如何使用方法，如果你有时间，推荐你看<a target="_blank" rel="noopener" href="http://commons.apache.org/proper/commons-fileupload/using.html">官方文档</a></p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/Common%20FileUpload%E4%BB%8B%E7%BB%8D-commonfileupload%E4%BB%8B%E7%BB%8D/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/%E6%88%91%E6%9C%89%E7%82%B9%E6%83%B3%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2%E4%BA%86-%E6%88%91%E6%9C%89%E7%82%B9%E6%83%B3%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2%E4%BA%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E6%88%91%E6%9C%89%E7%82%B9%E6%83%B3%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2%E4%BA%86-%E6%88%91%E6%9C%89%E7%82%B9%E6%83%B3%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2%E4%BA%86/" class="post-title-link" itemprop="url">我有点想要写博客了</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-09-06 22:31:33" itemprop="dateCreated datePublished" datetime="2019-09-06T22:31:33+08:00">2019-09-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:26:48" itemprop="dateModified" datetime="2021-02-16T23:26:48+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%9A%8F%E7%AC%94/" itemprop="url" rel="index"><span itemprop="name">随笔</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>自从入职新公司，在印象中应该是一直没有打开过自己的CSDN主页，甚至完全忘记了自己还有一个博客这件事。<br>今天偶然间看到一篇博文，说的是搭建一个自己的博客。想着自己也一直有着这样的想法，于是回来看了看。并想着：我得重新开始写博客</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E6%88%91%E6%9C%89%E7%82%B9%E6%83%B3%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2%E4%BA%86-%E6%88%91%E6%9C%89%E7%82%B9%E6%83%B3%E8%A6%81%E5%86%99%E5%8D%9A%E5%AE%A2%E4%BA%86/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/%E9%80%9A%E8%BF%87%E5%87%A0%E4%B8%AA%E9%97%AE%E9%A2%98%E4%BA%86%E8%A7%A3HTTP%E5%8D%8F%E8%AE%AE-%E9%80%9A%E8%BF%87%E5%87%A0%E4%B8%AA%E9%97%AE%E9%A2%98%E4%BA%86%E8%A7%A3http%E5%8D%8F%E8%AE%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E9%80%9A%E8%BF%87%E5%87%A0%E4%B8%AA%E9%97%AE%E9%A2%98%E4%BA%86%E8%A7%A3HTTP%E5%8D%8F%E8%AE%AE-%E9%80%9A%E8%BF%87%E5%87%A0%E4%B8%AA%E9%97%AE%E9%A2%98%E4%BA%86%E8%A7%A3http%E5%8D%8F%E8%AE%AE/" class="post-title-link" itemprop="url">通过几个问题了解HTTP协议</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-10-15 22:31:33" itemprop="dateCreated datePublished" datetime="2018-10-15T22:31:33+08:00">2018-10-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:26:58" itemprop="dateModified" datetime="2021-02-16T23:26:58+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">网络基础</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Http全称？"><a href="#Http全称？" class="headerlink" title="Http全称？"></a>Http全称？</h2><pre><code>超文本传输协议：Hypertext Transfer protocol
</code></pre>
<h2 id="常用状态码"><a href="#常用状态码" class="headerlink" title="常用状态码"></a>常用状态码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- 200	响应正常</span><br><span class="line">- 400	Bad Request，请求数据有问题</span><br><span class="line">- 401	Unauthorized，权限不足，资源存在但不让访问</span><br><span class="line">- 403	Forbidden，你的IP被屏蔽时会出现</span><br><span class="line">- 404	资源找不到</span><br><span class="line">- 301	重定向</span><br><span class="line">- 500	服务器内部错误</span><br></pre></td></tr></table></figure>

<h2 id="常用method"><a href="#常用method" class="headerlink" title="常用method"></a>常用method</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- get		用于获取资源</span><br><span class="line">- post		用于发送数据到服务端，常用于提交表单数据</span><br><span class="line">- put		用于修改资源属性</span><br><span class="line">- delete	用于删除资源</span><br></pre></td></tr></table></figure>

<h2 id="Http协议格式"><a href="#Http协议格式" class="headerlink" title="Http协议格式"></a>Http协议格式</h2><pre><code>请求和响应的消息协议是一样的：起始行、消息头、消息体。三部分以CRLF分隔，最后一个消息头有两个CRLF，表示接下来是消息体的内容了。
</code></pre>
<h3 id="起始行"><a href="#起始行" class="headerlink" title="起始行"></a>起始行</h3><pre><code>请求的起始行称为请求行，格式：method uri http/version，如 get /index.html http/1.1

响应的起始行称为状态行，格式 ：http/version code desc，如 http/1.1 200 ok。第三个字段是状态码的简单描述信息。
</code></pre>
<h3 id="消息头"><a href="#消息头" class="headerlink" title="消息头"></a>消息头</h3><pre><code>消息头由很多键值对组成，键值对之间以CRLF作为分隔。
</code></pre>
<h3 id="消息体"><a href="#消息体" class="headerlink" title="消息体"></a>消息体</h3><pre><code>消息体是一个字符串，字符串长度由消息头中的Content-length字段指定。没有指定则没有消息体。
</code></pre>
<h2 id="分块传送"><a href="#分块传送" class="headerlink" title="分块传送"></a>分块传送</h2><pre><code>当浏览器向服务器请求一个资源时，该资源是一个动态资源，服务器无法预知该资源的大小。此时会采用分块传送。

服务器先生成一个chunk，发送这个chunk，再生成一个chunk，再发送一个chunk，直到全部资源传送完成。分块传送需要在请求头增加一个特殊的键值对transfer-encoding: chunked，那么消息体的内容便是分块传送的。

chunked传输格式如下图所示，由一段一段的分块组合而成，每个块由一个长度行和一个分块体组成，最后一个分块长度为0表示结束。
</code></pre>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zczAuYmFpZHUuY29tLzZPTldzamlwMFFJWjh0eWhucS9pdC91PTIzNjg2NDEwMjEsMTU4MTE3ODM1MiZmbT0xNzMmYXBwPTI1JmY9SlBFRw?x-oss-process=image/format,png" alt="img"></p>
<h2 id="持久连接的机制是怎样的"><a href="#持久连接的机制是怎样的" class="headerlink" title="持久连接的机制是怎样的"></a>持久连接的机制是怎样的</h2><pre><code>早期的Http 1.0每个请求都会发起一个连接，每个页面数百个请求就会发起数百个连接，非常浪费服务器资源。因此在Http 1.1加入了持久连接的机制，Keep-Alive，使得一个连接可以连续服务多个请求。节省了资源

持久连接并不会一直保持连接，而是通过设置 Keep Alive Timeout和Keep Alive Request限制单个连接的持续时长和最多的请求次数。

如果 Keep Alive Timeout设置为0，则退化到非持久连接。如果Keep Alive Timeout设置为超长，当然也不会一直保持，各个浏览器都有相关的控制。
</code></pre>
<h2 id="什么叫Pipeline管线化"><a href="#什么叫Pipeline管线化" class="headerlink" title="什么叫Pipeline管线化"></a>什么叫Pipeline管线化</h2><pre><code>这也是Http 1.1新引入的特性。之前的请求模式是：一个请求发起，服务器响应完了，再进行下一个请求的发起和响应，这样当请求一多时就会很慢

改进的方式是，将多个请求按顺序打包一起发给服务器，服务器再按顺序将多个响应一起打包回复。这样就快很多了。如下图示很形象地描述了管线化前和管线化后
</code></pre>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zczAuYmFpZHUuY29tLzZPTldzamlwMFFJWjh0eWhucS9pdC91PTM0MDIwNDQ4MzgsNzAzNzIwMjE1JmZtPTE3MyZhcHA9MjUmZj1KUEVH?x-oss-process=image/format,png" alt="img"></p>
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9zczIuYmFpZHUuY29tLzZPTllzamlwMFFJWjh0eWhucS9pdC91PTEyOTc0NTkzNDksMTU2MTg5NTk3MSZmbT0xNzMmYXBwPTI1JmY9SlBFRw?x-oss-process=image/format,png" alt="img"></p>
<h2 id="如何理解Http协议的无状态性"><a href="#如何理解Http协议的无状态性" class="headerlink" title="如何理解Http协议的无状态性"></a>如何理解Http协议的无状态性</h2><pre><code>无状态指的是服务器的协议层无需为不同请求之间建立任何相关关系。不过这是协议规定的，但建立在Http协议上的应用会通过Session的方式来达到状态保存的目录。
</code></pre>
<h2 id="GET和POST的区别"><a href="#GET和POST的区别" class="headerlink" title="GET和POST的区别"></a>GET和POST的区别</h2><ul>
<li>GET用于获取资源，POST用于向服务器发送数据</li>
<li>GET将数据添加到URL后，POST则是将数据放在请求消息体中</li>
<li>由第二点导致了如下三点的不同<ul>
<li>GET相对POST能让用户看到传输内容，不安全</li>
<li>GET由于URL长度的限制传输内容有限，POST则好很多</li>
<li>GET由于URL的编码限制只能传输ASCII码，而POST则可以传输正常编码格式的文件</li>
</ul>
</li>
</ul>
<h2 id="常见Http消息头字段"><a href="#常见Http消息头字段" class="headerlink" title="常见Http消息头字段"></a>常见Http消息头字段</h2><h3 id="通用头部字段"><a href="#通用头部字段" class="headerlink" title="通用头部字段"></a>通用头部字段</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- Date				报文创建时间</span><br><span class="line">- Connection		连接的管理：连续或是此次发送后关闭连接</span><br><span class="line">- Cache-Control		缓存控制，如值为max-age=120，表示缓存120秒有效</span><br><span class="line">- Transfer-Encoding	报文的传输编码格式</span><br></pre></td></tr></table></figure>

<h3 id="请求头部字段"><a href="#请求头部字段" class="headerlink" title="请求头部字段"></a>请求头部字段</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- Host				请求资源所在服务器：主机+端口</span><br><span class="line">- User-Agent		客户端将本地的操作系统、浏览器和其它属性发送给服务器，非必须，可修改</span><br><span class="line">- Accept			客户端希望接收的媒体类型，如 image/webp,image/apng,image/*,*/*;q=0.8</span><br><span class="line">- Accept-Charset	客户端可接收的字符集</span><br><span class="line">- Accept-Encoding	客户端可接收的内容编码，如 gzip, deflate, br</span><br><span class="line">- Accept-Language	客户端可接收的自然语言，如 zh-CN,zh;q=0.9</span><br><span class="line">- Authorization		用于证明客户端有权查看某个资源</span><br><span class="line">- refer				</span><br><span class="line"></span><br><span class="line">举例</span><br><span class="line">GET /form.html HTTP/1.1 (CRLF)</span><br><span class="line"></span><br><span class="line">Accept:image/gif,image/x-xbitmap,image/jpeg,application/msword,*/* (CRLF)</span><br><span class="line">Accept-Language:zh-cn (CRLF)</span><br><span class="line">Accept-Encoding:gzip,deflate (CRLF)</span><br><span class="line">If-Modified-Since:Wed,05 Jan 2007 11:21:25 GMT (CRLF)</span><br><span class="line">If-None-Match:W/&quot;80b1a4c018f3c41:8317&quot; (CRLF)</span><br><span class="line">User-Agent:Mozilla/4.0(compatible;MSIE6.0;Windows NT 5.0) (CRLF)</span><br><span class="line">Host:www.guet.edu.cn (CRLF)</span><br><span class="line">Connection:Keep-Alive (CRLF)</span><br></pre></td></tr></table></figure>

<h3 id="响应头部字段"><a href="#响应头部字段" class="headerlink" title="响应头部字段"></a>响应头部字段</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- Accept-Ranges		可接受的字节范围</span><br><span class="line">- Location			让客户端重定向到的URL</span><br><span class="line">- Server			Http服务器的安装信息，如 Apache-Coyote/1.1</span><br></pre></td></tr></table></figure>

<h3 id="实体头部字段"><a href="#实体头部字段" class="headerlink" title="实体头部字段"></a>实体头部字段</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- Allow				资源可支持的Http方法</span><br><span class="line">- Content-type		实体内容的类型</span><br><span class="line">- Content-Encoding	实体内容的编码方式</span><br><span class="line">- Content-Language	实体内容的语言</span><br><span class="line">- Content-length	实体内容的长度，单位是字节</span><br><span class="line">- Content-Range		实体内容的位置范围，一般是发出部分请求时使用</span><br><span class="line">- Last-Modified		请求资源最后修改时间</span><br></pre></td></tr></table></figure>

<h2 id="其它知识补充"><a href="#其它知识补充" class="headerlink" title="其它知识补充"></a>其它知识补充</h2><h3 id="应用层协议"><a href="#应用层协议" class="headerlink" title="应用层协议"></a>应用层协议</h3><ul>
<li>HTTP</li>
<li>FTP</li>
<li>SMTP</li>
<li>DNS</li>
<li>TELNET</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/Spring%20Webflow%20-%20%E8%A7%86%E5%9B%BE%E7%8A%B6%E6%80%81-springwebflow-%E8%A7%86%E5%9B%BE%E7%8A%B6%E6%80%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Spring%20Webflow%20-%20%E8%A7%86%E5%9B%BE%E7%8A%B6%E6%80%81-springwebflow-%E8%A7%86%E5%9B%BE%E7%8A%B6%E6%80%81/" class="post-title-link" itemprop="url">Spring Webflow - 视图状态</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-09 14:00:00" itemprop="dateCreated datePublished" datetime="2018-09-09T14:00:00+08:00">2018-09-09</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:27:30" itemprop="dateModified" datetime="2021-02-16T23:27:30+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring-Webflow/" itemprop="url" rel="index"><span itemprop="name">Spring | Webflow</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><h2 id="指定view-state的view属性的几种方式"><a href="#指定view-state的view属性的几种方式" class="headerlink" title="指定view-state的view属性的几种方式"></a>指定view-state的view属性的几种方式</h2><ul>
<li>按照默认名称在相对路径下查找view</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在flow配置文件同目录下查找名为enterBookingDetails的视图 --&gt;</span><br><span class="line">&lt;view-state id=&quot;enterBookingDetails&quot;&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>指明view名称，在相对路径下查找view</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在flow配置文件同目录下查找名为bookingDetails.xhtml的视图 --&gt;</span><br><span class="line">&lt;view-state id=&quot;enterBookingDetails&quot; view=&quot;bookingDetails.xhtml&quot;&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>绝对路径查找view</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 直接查找/WEB-INF/hotels/booking/bookingDetails.xhtml的视图 --&gt;</span><br><span class="line">&lt;view-state id=&quot;enterBookingDetails&quot; view=&quot;/WEB-INF/hotels/booking/bookingDetails.xhtml&quot;&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>按照逻辑ID定位view<br>这是结合Spring提供的其它viewResolver来定位到其他组件中的view，如Tiles等。在前面 <a target="_blank" rel="noopener" href="https://blog.csdn.net/zou8944/article/details/82391712">配置</a> 一章中有讲</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 结合viewResolver共同确定视图位 --&gt;</span><br><span class="line">&lt;view-state id=&quot;enterBookingDetails&quot; view=&quot;bookingDetails&quot;&gt;</span><br></pre></td></tr></table></figure>
<h2 id="在viewScope中分配变量"><a href="#在viewScope中分配变量" class="headerlink" title="在viewScope中分配变量"></a>在viewScope中分配变量</h2><ul>
<li>直接分配</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;var name=&quot;searchCriteria&quot; class=&quot;com.mycompany.myapp.hotels.SearchCriteria&quot; /&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>依靠运算结果分配</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;on-render&gt;</span><br><span class="line">  	 &lt;evaluate expression=&quot;bookingService.findHotels(searchCriteria)&quot; result=&quot;viewScope.hotels&quot; /&gt;</span><br><span class="line">&lt;/on-render&gt;</span><br></pre></td></tr></table></figure>
<h2 id="在viewScope中操作对象"><a href="#在viewScope中操作对象" class="headerlink" title="在viewScope中操作对象"></a>在viewScope中操作对象</h2><p>如下例子展示了如何在同一个view state的不同时机操作一系列对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;view-state id=&quot;searchResults&quot;&gt;</span><br><span class="line">   	&lt;on-render&gt;</span><br><span class="line">		&lt;evaluate expression=&quot;bookingService.findHotels(searchCriteria)&quot;</span><br><span class="line">                 result=&quot;viewScope.hotels&quot; /&gt;</span><br><span class="line">	&lt;/on-render&gt;</span><br><span class="line">	&lt;transition on=&quot;next&quot;&gt;</span><br><span class="line">		&lt;evaluate expression=&quot;searchCriteria.nextPage()&quot; /&gt;</span><br><span class="line">		&lt;render fragments=&quot;searchResultsFragment&quot; /&gt;</span><br><span class="line">	&lt;/transition&gt;</span><br><span class="line">	&lt;transition on=&quot;previous&quot;&gt;</span><br><span class="line">		&lt;evaluate expression=&quot;searchCriteria.previousPage()&quot; /&gt;</span><br><span class="line">		&lt;render fragments=&quot;searchResultsFragment&quot; /&gt;</span><br><span class="line">	&lt;/transition&gt;</span><br><span class="line">&lt;/view-state&gt;</span><br><span class="line">&lt;!-- 渲染view之前，首先执行findHotels方法，将结果放到viewScope的hotels中 --&gt;</span><br><span class="line">&lt;!-- 当返回next事件时，执行nextPage()方法， 然后渲染查找结果部分 --&gt;</span><br><span class="line">&lt;!-- 当返回previous事件时，执行前一页操作，然后渲染查找结果部分 --&gt;</span><br></pre></td></tr></table></figure>
<h2 id="lt-on-render-gt"><a href="#lt-on-render-gt" class="headerlink" title="&lt;on-render&gt;"></a><code>&lt;on-render&gt;</code></h2><p>在view渲染前可以执行一个或多个action，<strong>这些action将会在视图最开始渲染以及后续的任何刷新，甚至视图局部的重新渲染执行</strong>。以上面的代码为例，在重新渲染结果之前，还会先执行一次findHotels方法。<br>##数据绑定</p>
<h2 id="在view-state上绑定model"><a href="#在view-state上绑定model" class="headerlink" title="在view-state上绑定model"></a>在view-state上绑定model</h2><p>使用model属性，可以将一个对象绑定到view中的表单中。web flow可以帮助完成对象属性和表单域的绑定和验证。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view-state id=&quot;enterBookingDetails&quot; model=&quot;booking&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>绑定时机是当view的event发生时</p>
<ul>
<li><p><code>view-to-model</code>绑定：在view完成并回发时，用户的输入域会被绑定到指定对象的属性上</p>
</li>
<li><p><code>model</code>验证：绑定后，如果需要验证，验证逻辑会被调用。</p>
</li>
<li><p>需要指出的是：只有当验证成功后才能transition到别的state，验证失败时会重新渲染该view，要求用户重新输入。<br>##绑定model时的类型转换<br>####基础<br>由于客户端上传的表单数据都是字符串类型的， 因此需要进行类型转换</p>
</li>
<li><p>Web Flow类型转换和Spring MVC的类型转换的关系<br>在web-flow 2.1以前，Sprign MVC和web-flow使用不同的类型转换机制，但是2.1以后，二者使用相同的类型转换</p>
</li>
</ul>
<p><strong>以前</strong>，Web Flow使用<code>spring-binding-2.4.6.RELEASE.jar</code>包提供的API进行类型转换，相关的类有<code>org.springframework.binding.convert.service.DefaultConversionService</code>， <code>org.springframework.binding.convert.converters.Converter</code>等，通过实现<code>Converter</code>接口完成自定义转换器，再通过<code>DefaultConversionService</code>进行注册，就像如下所示的方式1那样；而且这样还能够注册带命名ID的转换器，可以结合<code>&lt;bingding&gt;</code>的<code>converter</code>属性进行使用，但这种方式已经非常不建议了。<br><strong>目前</strong>， Web Flow在执行conversionService时依然使用<code>org.springframework.binding.convert.service.DefaultConversionService</code>，但该服务已经不会去注册任何默认的转换器和格式化器了，而是将转换和格式任务全部委托给来自<code>spring-core-4.3.7.RELEASE.jar</code>包的<code>org.springframework.core.convert.ConversionService</code>完成。<code>DefaultConversionService</code>内部维护一个<code>ConversionService</code>对象，对<code>DefaultConversionService</code>中进行的大多数操作都被转变成对<code>ConversionService</code>的操作(对带命名ID转换器的管理除外)。值得一提的是，命名ID的转换器非常没有必要，因为在检测到相应类型后，系统会自动调用合适的转换器。</p>
<ul>
<li>方式一 传统方式添加Converter(不建议使用)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.binding.convert.converters.Converter;</span><br><span class="line">// 定义自己的转换器</span><br><span class="line">public class DateConverter implements Converter &#123;</span><br><span class="line"></span><br><span class="line">    public Class&lt;?&gt; getSourceClass() &#123;</span><br><span class="line">        return String.class;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Class&lt;?&gt; getTargetClass() &#123;</span><br><span class="line">        return java.util.Date.class;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Object convertSourceToTargetClass(Object source, Class&lt;?&gt; targetClass) throws Exception &#123;</span><br><span class="line">        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line">        </span><br><span class="line">        return sdf.parse(source.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 注册自己的转换器</span><br><span class="line">public class ApplicationConversionService extends DefaultConversionService &#123;</span><br><span class="line">	public ApplicationConversionService() &#123;</span><br><span class="line">   		addConverter(new DateConverter());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用转换器，什么都不用指定，当检测到model中的checkinDate属性为Date类型时，DateConverter会自动被调用 --&gt;</span><br><span class="line">&lt;view-state id=&quot;enterBookingDetails&quot; model=&quot;booking&quot;&gt;</span><br><span class="line">   	&lt;binder&gt;</span><br><span class="line">       	&lt;binding property=&quot;checkinDate&quot;/&gt;</span><br><span class="line">   	&lt;/binder&gt;</span><br><span class="line">&lt;/view-state&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>方式二 添加带ID的Converter(已过时，不推荐使用)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DateConverter的定义不变</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 注册时指定id</span><br><span class="line">public class ApplicationConversionService extends DefaultConversionService &#123;</span><br><span class="line">	public ApplicationConversionService() &#123;</span><br><span class="line">		// 该方法已被标为deprecated</span><br><span class="line">   		addConverter(&quot;dateConverter&quot;, new DateConverter());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用时指定id --&gt;</span><br><span class="line">&lt;view-state id=&quot;enterBookingDetails&quot; model=&quot;booking&quot;&gt;</span><br><span class="line">   	&lt;binder&gt;</span><br><span class="line">       	&lt;binding property=&quot;checkinDate&quot; converter=&quot;dateConverter&quot;/&gt;</span><br><span class="line">   	&lt;/binder&gt;</span><br><span class="line">&lt;/view-state&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>方式三 - 配置通用的Converter和Formatter(推荐使用，当前版本鼓励的方式)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">// 首先实现FormattingConversionServiceFactoryBean，添加自定义格式化器和转换器</span><br><span class="line">public class ApplicationConversionServiceFactoryBean extends FormattingConversionServiceFactoryBean &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setConverters(Set&lt;?&gt; converters) &#123;</span><br><span class="line">        Converter&lt;String, Date&gt; converter = new Converter&lt;String, Date&gt;() &#123;</span><br><span class="line">            public Date convert(String source) &#123;</span><br><span class="line">                SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line">                return sdf.parse(source);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        Set&lt;Converter&lt;String, Date&gt;&gt; set = new HashSet&lt;Converter&lt;String,Date&gt;&gt;();</span><br><span class="line">        set.add(converter);</span><br><span class="line">        super.setConverters(set);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setFormatters(Set&lt;?&gt; formatters) &#123;</span><br><span class="line">        Set&lt;Formatter&lt;Date&gt;&gt; set= new HashSet&lt;Formatter&lt;Date&gt;&gt;();</span><br><span class="line">        set.add(new Formatter&lt;Date&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            public String print(Date object, Locale locale) &#123;</span><br><span class="line">                SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line">                return sdf.format(object);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            public Date parse(String text, Locale locale) throws ParseException &#123;</span><br><span class="line">                SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line">                return sdf.parse(text);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        super.setFormatters(set);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 创建由ApplicationConversionServiceFactoryBean产生的ConversionService</span><br><span class="line">// 该ConversionService是Spring MVC中类型转换的核心，可以同时配置给Spring MVC和Web Flow</span><br><span class="line">@Bean(&quot;applicationConversionService&quot;)</span><br><span class="line">public ConversionService applicationConversionService() &#123;</span><br><span class="line">    FormattingConversionServiceFactoryBean factory = new ApplicationConversionServiceFactoryBean();</span><br><span class="line">    // 添加自定义格式化器</span><br><span class="line">    factory.setFormatters(null);</span><br><span class="line">    // 添加自定义格式转换器</span><br><span class="line">    factory.setConverters(null);</span><br><span class="line">    // 生成ConversionService </span><br><span class="line">    factory.afterPropertiesSet();</span><br><span class="line">    // 返回ConversionService </span><br><span class="line">    return factory.getObject();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 下面三个步骤用于配置给Web Flow</span><br><span class="line"></span><br><span class="line">@Bean(&quot;defaultConversionService&quot;)</span><br><span class="line">public DefaultConversionService conversionService(@Autowired ConversionService applicationConversionService) &#123;</span><br><span class="line">    return new DefaultConversionService(applicationConversionService);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Bean</span><br><span class="line">public FlowBuilderServices flowBuilderServices(@Autowired MvcViewFactoryCreator mvcViewFactoryCreator, @Autowired DefaultConversionService defaultConversionService) &#123;</span><br><span class="line">    return getFlowBuilderServicesBuilder()</span><br><span class="line">            .setConversionService(defaultConversionService)</span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 注册flow</span><br><span class="line">@Bean(&quot;flowRegistry&quot;)</span><br><span class="line">public FlowDefinitionRegistry flowRegistry(@Autowired FlowBuilderServices flowBuilderServices) &#123;</span><br><span class="line">    </span><br><span class="line">    return getFlowDefinitionRegistryBuilder()</span><br><span class="line">            .setBasePath(&quot;/WEB-INF/jsp/flow&quot;)</span><br><span class="line">            .addFlowLocation(&quot;/config/search-flow.xml&quot;)</span><br><span class="line">            .setFlowBuilderServices(flowBuilderServices)</span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 下面的步骤用于注册给Spring MVC --&gt;</span><br><span class="line">&lt;mvc:annotation-driven conversion-service=&quot;applicationConversionService&quot; /&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>针对上述三种方式的说明</li>
<li>方式一表面上使用的是旧的转换器添加方式，但内部实现还是按照新的方式进行，在添加Converter时，会通过一个适配器类转换将<code>org.springframework.binding.convert.converters.Converter</code>转换为<code>org.springframework.core.convert.converter.GenericConverter</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 源码片段</span><br><span class="line">public void addConverter(Converter converter) &#123;</span><br><span class="line">	((ConverterRegistry) delegate).addConverter(new SpringBindingConverterAdapter(converter));</span><br><span class="line">	if (converter instanceof TwoWayConverter) &#123;</span><br><span class="line">		TwoWayConverter twoWayConverter = (TwoWayConverter) converter;</span><br><span class="line">		((ConverterRegistry) delegate).addConverter(new SpringBindingConverterAdapter(new ReverseConverter(</span><br><span class="line">				twoWayConverter)));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>方式二已过时，这里仅展示</li>
<li>方式三推荐使用，但这里仅展示了我自己实验成功的java config配置方式，xml配置方式可以参见<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-webflow/docs/2.4.5.RELEASE/reference/html/views.html#converter-configuration">官网</a>。</li>
<li>实际使用时，会发现方式一从视图提交到model时类型转换能够正常进行，但是从model回填到视图时并非自己最开始输入的数值，那是因为我们只设置了Converter，没有设置Formatter。</li>
<li>关于转换器的配置，只要认识到ConversionService是类型转换的核心，就会省事很多</li>
</ul>
<h2 id="Converter和Formatter的区别"><a href="#Converter和Formatter的区别" class="headerlink" title="Converter和Formatter的区别"></a>Converter和Formatter的区别</h2><ul>
<li><code>Converter</code>: 是<code>spring-core-4.3.7.RELEASE.jar</code>包提供的，用于<code>Object to Object</code>的转换</li>
<li><code>Formatter</code>: 是<code>spring-context-4.3.7.RELEASE.jar</code>包提供的，用于<code>Object to String</code>的转换。</li>
</ul>
<h2 id="格式化注解"><a href="#格式化注解" class="headerlink" title="格式化注解"></a>格式化注解</h2><p>新的类型转换提供两个有用的注解，可以放在model类的属性上，和被@Controller类的方法参数中。</p>
<ul>
<li><code>NumberFormat</code></li>
<li><code>DateTimeFormat</code>： 该注解默认使用<a target="_blank" rel="noopener" href="http://www.joda.org/joda-time/"><code>Joda Time</code></a>，需要在类路径中包含Joda Time的包。默认情况下Spring MVC和web flow都没有其他的日期相关的转换器和格式化器。因此定义我们自己的日期相关转换器和格式化器非常重要。</li>
<li>此外，我们还可以参照上述两个注解定义自己的注解.</li>
</ul>
<h2 id="关于绑定的另外两点"><a href="#关于绑定的另外两点" class="headerlink" title="关于绑定的另外两点"></a>关于绑定的另外两点</h2><ul>
<li>取消绑定<br>可以使用bind属性在特定情况下取消绑定。如下当触发cancel事件时不会执行绑定操作</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;view-state id=&quot;enterBookingDetails&quot; model=&quot;booking&quot;&gt;</span><br><span class="line">    &lt;transition on=&quot;proceed&quot; to=&quot;reviewBooking&quot;&gt;</span><br><span class="line">    &lt;transition on=&quot;cancel&quot; to=&quot;bookingCancelled&quot; bind=&quot;false&quot; /&gt;</span><br><span class="line">&lt;/view-state&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>显式地指明绑定的字段<br>使用<binder>标签可以显式指明需要绑定的字段，同时可以指明需要使用到的转换器，和是否允许为空。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;view-state id=&quot;enterBookingDetails&quot; model=&quot;booking&quot;&gt;</span><br><span class="line">    &lt;binder&gt;</span><br><span class="line">        &lt;binding property=&quot;checkinDate&quot; converter=&quot;shortDate&quot; required=&quot;true&quot; /&gt;</span><br><span class="line">        &lt;binding property=&quot;checkoutDate&quot; converter=&quot;shortDate&quot; required=&quot;true&quot; /&gt;</span><br><span class="line">        &lt;binding property=&quot;creditCard&quot; required=&quot;true&quot; /&gt;</span><br><span class="line">        &lt;binding property=&quot;creditCardName&quot; required=&quot;true&quot; /&gt;</span><br><span class="line">        &lt;binding property=&quot;creditCardExpiryMonth&quot; required=&quot;true&quot; /&gt;</span><br><span class="line">        &lt;binding property=&quot;creditCardExpiryYear&quot; required=&quot;true&quot; /&gt;</span><br><span class="line">    &lt;/binder&gt;</span><br><span class="line">    &lt;transition on=&quot;proceed&quot; to=&quot;reviewBooking&quot;&gt;</span><br><span class="line">    &lt;transition on=&quot;cancel&quot; to=&quot;bookingCancelled&quot; bind=&quot;false&quot; /&gt;</span><br><span class="line">&lt;/view-state&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意事项</p>
<ol>
<li>没有显式指定绑定字段时，所有model对象的公共属性都会被绑定；指定绑定字段时，则只有显式指定的字段会被绑定</li>
<li>没有显式声明转换器时，会使用自动检测的转换器</li>
<li>声明不允许为空时，若出现空，则会产生验证错误，并会重新绘制视图并报错。<br>##绑定数据的验证<br>Web Flow支持自定义验证条件和JSR-303 Bean验证框架<br>####JSR-303 Bean Validation</li>
</ol>
<ul>
<li> 基础配置<br>首先类路径中需要有一个validator的jar包，然后按照如下配置后，validator会应用到所有的添加了条件注解的model属性中</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;webflow:flow-registry flow-builder-services=&quot;flowBuilderServices&quot; /&gt;</span><br><span class="line">&lt;webflow:flow-builder-services id=&quot;flowBuilderServices&quot; validator=&quot;validator&quot; /&gt;</span><br><span class="line">&lt;bean id=&quot;validator&quot; class=&quot;org.springframework.validation.beanvalidation.LocalValidatorFactoryBean&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;form中按如下方式配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@NotNull</span><br><span class="line">@Size(min = 2, max = 30, message=&quot;at least 3 chars&quot; )</span><br><span class="line">private String name;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;前端按如下配置，使用<code>&lt;sf:errors&gt;</code>可将name属性的错误信息显示出来</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;sf:form action=&quot;$&#123;flowExecutionUrl&#125;&amp;_eventId=submit&quot; commandName=&quot;searchForm&quot; method=&quot;post&quot;&gt;</span><br><span class="line">    Name: &lt;sf:input path=&quot;name&quot;/&gt; &lt;sf:errors path=&quot;name&quot;&gt;&lt;/sf:errors&gt;&lt;br/&gt;</span><br><span class="line">       &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;</span><br><span class="line">&lt;/sf:form&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;效果如下<br><img src="https://img-blog.csdn.net/20180909184901856?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pvdTg5NDQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<ul>
<li>部分验证<br>JSR-303支持部分验证，通过验证组的方式，使用如下(我在验证该方式时是不行的，提示viwe-state标签不允许出现validation-hints属性)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@NotNull</span><br><span class="line">@Size(min = 2, max = 30, groups = State1.class)</span><br><span class="line">private String name;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view-state id=&quot;state1&quot; model=&quot;myModel&quot; validation-hints=&quot;&#x27;group1,group2&#x27;&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;对该方法不做详细解释，最好还是参考一下JSR-303再来看</p>
<h2 id="自定义验证"><a href="#自定义验证" class="headerlink" title="自定义验证"></a>自定义验证</h2><p>JSR-303仅支持对Bean的验证，如非空，字符串长度等。我们经常需要自定义验证逻辑，有如下两种方式进行自定义</p>
<ul>
<li>一是在model类内部定义一个以<code>validate$&#123;stateId&#125;(ValidationContext)</code>为签名的方法，在view提交时会自动调用该验证方法。stateId是view-state的id</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 官方示例</span><br><span class="line">public class Booking &#123;</span><br><span class="line">    private Date checkinDate;</span><br><span class="line">    private Date checkoutDate;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    public void validateEnterBookingDetails(ValidationContext context) &#123;</span><br><span class="line">        MessageContext messages = context.getMessageContext();</span><br><span class="line">        if (checkinDate.before(today())) &#123;</span><br><span class="line">            messages.addMessage(new MessageBuilder().error().source(&quot;checkinDate&quot;).</span><br><span class="line">                defaultText(&quot;Check in date must be a future date&quot;).build());</span><br><span class="line">        &#125; else if (!checkinDate.before(checkoutDate)) &#123;</span><br><span class="line">            messages.addMessage(new MessageBuilder().error().source(&quot;checkoutDate&quot;).</span><br><span class="line">                defaultText(&quot;Check out date must be later than check in date&quot;).build());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>二是单独定义一个类，类名为<code>$&#123;model&#125;Validator</code>，在其内部定义一个以<code>validate$&#123;stateId&#125;($&#123;model&#125;, ValidationContext)</code>为签名的方法，然后将该类装载到Spring中。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 官方示例</span><br><span class="line">@Component</span><br><span class="line">public class BookingValidator &#123;</span><br><span class="line">    public void validateEnterBookingDetails(Booking booking, ValidationContext context) &#123;</span><br><span class="line">        MessageContext messages = context.getMessageContext();</span><br><span class="line">        if (booking.getCheckinDate().before(today())) &#123;</span><br><span class="line">            messages.addMessage(new MessageBuilder().error().source(&quot;checkinDate&quot;).</span><br><span class="line">                defaultText(&quot;Check in date must be a future date&quot;).build());</span><br><span class="line">        &#125; else if (!booking.getCheckinDate().before(booking.getCheckoutDate())) &#123;</span><br><span class="line">            messages.addMessage(new MessageBuilder().error().source(&quot;checkoutDate&quot;).</span><br><span class="line">                defaultText(&quot;Check out date must be later than check in date&quot;).build());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;针对第二种情况也可以定义一个<code>validate($&#123;model&#125;, ValidationContext)</code>方法，这样无论在哪个view-state的view返回时，只要绑定了该moel，都会调用该验证方法。<br>&emsp;&emsp;当<code>validate($&#123;model&#125;, ValidationContext)</code>和validate<code>$&#123;stateId&#125;($&#123;model&#125;, ValidationContext)</code>都存在时，会先调用后者，再调用前者。</p>
<h2 id="多说两点"><a href="#多说两点" class="headerlink" title="多说两点"></a>多说两点</h2><ul>
<li>失能验证<br>通过如下方式可以在局部使得验证失效</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;view-state id=&quot;chooseAmenities&quot; model=&quot;booking&quot;&gt;</span><br><span class="line">    &lt;transition on=&quot;proceed&quot; to=&quot;reviewBooking&quot;&gt;</span><br><span class="line">    &lt;transition on=&quot;back&quot; to=&quot;enterBookingDetails&quot; validate=&quot;false&quot; /&gt;</span><br><span class="line">&lt;/view-state&gt;</span><br></pre></td></tr></table></figure>
<h1 id="转移"><a href="#转移" class="headerlink" title="转移"></a>转移</h1><p>在一个view-state中，可能发生各种转移</p>
<ul>
<li> 转移之前执行操作<br>可以在转移之前执行特定的操作，如一个方法， 当方法返回false或者发生错误时，转移不会继续进行下去。而是重新渲染相应的部分</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition on=&quot;submit&quot; to=&quot;bookingConfirmed&quot;&gt;</span><br><span class="line">    &lt;evaluate expression=&quot;bookingAction.makeBooking(booking, messageContext)&quot; /&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>全局转移<br>定义全局有效的转移操作</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;global-transitions&gt;</span><br><span class="line">    &lt;transition on=&quot;login&quot; to=&quot;login&quot; /&gt;</span><br><span class="line">    &lt;transition on=&quot;logout&quot; to=&quot;logout&quot; /&gt;</span><br><span class="line">&lt;/global-transitions&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>事件处理器<br>可以利用transition标签只响应事件，而不做任何跳转操作，从而作为事件处理器</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition on=&quot;event&quot;&gt;</span><br><span class="line">    &lt;!-- Handle event --&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>局部渲染<br>利用<code>&lt;render&gt;</code>标签可以进行局部渲染，一般用于Ajax的局部刷新操作</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition on=&quot;next&quot;&gt;</span><br><span class="line">    &lt;evaluate expression=&quot;searchCriteria.nextPage()&quot; /&gt;</span><br><span class="line">    &lt;render fragments=&quot;searchResultsFragment&quot; /&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;如上，当发生next事件时，首先执行翻页操作，然后重新刷新查询结果区域。fragment属性应该引用想要刷新的view的id,当刷新多个区域时，使用逗号隔开。</p>
<h1 id="view的回退控制"><a href="#view的回退控制" class="headerlink" title="view的回退控制"></a>view的回退控制</h1><p>当我们从一个view跳转到另一个view时，通过浏览器的回退按钮，可以返回上一个view，我们可以对这个功能进行配置</p>
<ul>
<li>失能一个回退view，即当前view不能再下一个view上回退，回退到的是前一个view</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition on=&quot;cancel&quot; to=&quot;bookingCancelled&quot; history=&quot;discard&quot;&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>失能所有回退view，即当前及之前所有view都是不能够被回退的。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition on=&quot;confirm&quot; to=&quot;bookingConfirmed&quot; history=&quot;invalidate&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>##MessageContext<br>Spring web flow的MessageContext是用来记录在flow执行期间的信息的。而其中包含的信息都由MessageBuilder产生，可以手动添加，也可以由系统自动产生。</p>
<h2 id="手动添加信息"><a href="#手动添加信息" class="headerlink" title="手动添加信息"></a>手动添加信息</h2><ul>
<li>手动添加普通文本</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MessageContext context = ...（这里一般是从上一级获取到context对象）</span><br><span class="line">MessageBuilder builder = new MessageBuilder();</span><br><span class="line">context.addMessage(builder.error().source(&quot;checkinDate&quot;)</span><br><span class="line">    .defaultText(&quot;Check in date must be a future date&quot;).build());</span><br><span class="line">context.addMessage(builder.warn().source(&quot;smoking&quot;)</span><br><span class="line">    .defaultText(&quot;Smoking is bad for your health&quot;).build());</span><br><span class="line">context.addMessage(builder.info()</span><br><span class="line">    .defaultText(&quot;We have processed your reservation - thank you and enjoy your stay&quot;).build());</span><br></pre></td></tr></table></figure>

<ul>
<li>添加Spring MessageSource得到的信息</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MessageContext context = ...</span><br><span class="line">MessageBuilder builder = new MessageBuilder();</span><br><span class="line">context.addMessage(builder.error().source(&quot;checkinDate&quot;).code(&quot;checkinDate.notFuture&quot;).build());</span><br><span class="line">context.addMessage(builder.warn().source(&quot;smoking&quot;).code(&quot;notHealthy&quot;)</span><br><span class="line">    .resolvableArg(&quot;smoking&quot;).build());</span><br><span class="line">context.addMessage(builder.info().code(&quot;reservationConfirmation&quot;).build());</span><br></pre></td></tr></table></figure>

<ul>
<li>添加message bundle获取的信息<br>可以直接在view或flow中使用<code>resourceBundle</code>这个EL变量来获取资源文件中的内容。(这个需要在web-flow同目录下放置一个<code>message.properties</code>文件)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input value=&quot;#&#123;resourceBundle.reservationConfirmation&#125;&quot; /&gt;</span><br></pre></td></tr></table></figure>
<h2 id="系统自动产生信息"><a href="#系统自动产生信息" class="headerlink" title="系统自动产生信息"></a>系统自动产生信息</h2><p>&emsp;&emsp;有多重情况下web-flow会自动生成message,其中一种重要的情况是当view-to-model验证失败时，生成规则是，首先到资源文件中查找key为<code>$&#123;model&#125;l.$&#123;property&#125;.$&#123;errCode&#125;</code>的资源，如果找不到，则直接查找key为<code>$&#123;errCode&#125;</code>的资源。<br>&emsp;&emsp; 举例：有model名为booking，验证其中的checkDate属性，当出现类型不匹配时，系统给出的错误代码为<code>typeMismatch</code>，则会在资源文件中查找如下key的资源<br> <code>booking.checkDate.typeMismatch</code>  或 <code>typeMismatch</code></p>
<h1 id="附"><a href="#附" class="headerlink" title="附"></a>附</h1><p>下面大致列举一下Spring MVC会自动注册的转换器和格式化器(调用<code>ConversionService</code>的<code>toString()</code>方法)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">@org.springframework.format.annotation.DateTimeFormat java.lang.Long -&gt; java.lang.String: org.springframework.format.datetime.DateTimeFormatAnnotationFormatterFactory@3de4aaed,@org.springframework.format.annotation.NumberFormat java.lang.Long -&gt; java.lang.String: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">@org.springframework.format.annotation.DateTimeFormat java.time.LocalDate -&gt; java.lang.String: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.time.LocalDate -&gt; java.lang.String : org.springframework.format.datetime.standard.TemporalAccessorPrinter@1cb91eff</span><br><span class="line">@org.springframework.format.annotation.DateTimeFormat java.time.LocalDateTime -&gt; java.lang.String: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.time.LocalDateTime -&gt; java.lang.String : org.springframework.format.datetime.standard.TemporalAccessorPrinter@2918eadb</span><br><span class="line">@org.springframework.format.annotation.DateTimeFormat java.time.LocalTime -&gt; java.lang.String: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.time.LocalTime -&gt; java.lang.String : org.springframework.format.datetime.standard.TemporalAccessorPrinter@6d563cf9</span><br><span class="line">@org.springframework.format.annotation.DateTimeFormat java.time.OffsetDateTime -&gt; java.lang.String: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.time.OffsetDateTime -&gt; java.lang.String : org.springframework.format.datetime.standard.TemporalAccessorPrinter@2f20d514</span><br><span class="line">@org.springframework.format.annotation.DateTimeFormat java.time.OffsetTime -&gt; java.lang.String: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.time.OffsetTime -&gt; java.lang.String : org.springframework.format.datetime.standard.TemporalAccessorPrinter@19212c1c</span><br><span class="line">@org.springframework.format.annotation.DateTimeFormat java.time.ZonedDateTime -&gt; java.lang.String: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.time.ZonedDateTime -&gt; java.lang.String : org.springframework.format.datetime.standard.TemporalAccessorPrinter@2e061032</span><br><span class="line">@org.springframework.format.annotation.DateTimeFormat java.util.Calendar -&gt; java.lang.String: org.springframework.format.datetime.DateTimeFormatAnnotationFormatterFactory@3de4aaed</span><br><span class="line">@org.springframework.format.annotation.NumberFormat java.lang.Byte -&gt; java.lang.String: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">@org.springframework.format.annotation.NumberFormat java.lang.Double -&gt; java.lang.String: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">@org.springframework.format.annotation.NumberFormat java.lang.Float -&gt; java.lang.String: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">@org.springframework.format.annotation.NumberFormat java.lang.Integer -&gt; java.lang.String: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">@org.springframework.format.annotation.NumberFormat java.lang.Short -&gt; java.lang.String: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">@org.springframework.format.annotation.NumberFormat java.math.BigDecimal -&gt; java.lang.String: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">@org.springframework.format.annotation.NumberFormat java.math.BigInteger -&gt; java.lang.String: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">java.lang.Boolean -&gt; java.lang.String : org.springframework.core.convert.support.ObjectToStringConverter@839fe61</span><br><span class="line">java.lang.Character -&gt; java.lang.Number : org.springframework.core.convert.support.CharacterToNumberFactory@30f9d9cf</span><br><span class="line">java.lang.Character -&gt; java.lang.String : org.springframework.core.convert.support.ObjectToStringConverter@2062b73e</span><br><span class="line">java.lang.Enum -&gt; java.lang.Integer : org.springframework.core.convert.support.EnumToIntegerConverter@65bd69cd</span><br><span class="line">java.lang.Enum -&gt; java.lang.String : org.springframework.core.convert.support.EnumToStringConverter@24ccca42</span><br><span class="line">java.lang.Integer -&gt; java.lang.Enum : org.springframework.core.convert.support.IntegerToEnumConverterFactory@22b0410c</span><br><span class="line">java.lang.Long -&gt; java.time.Instant : org.springframework.format.datetime.standard.DateTimeConverters$LongToInstantConverter@36c61628</span><br><span class="line">java.lang.Long -&gt; java.util.Calendar : org.springframework.format.datetime.DateFormatterRegistrar$LongToCalendarConverter@7a56bca3,java.lang.Long -&gt; java.util.Calendar : org.springframework.format.datetime.DateFormatterRegistrar$LongToCalendarConverter@32680fd1</span><br><span class="line">java.lang.Long -&gt; java.util.Date : org.springframework.format.datetime.DateFormatterRegistrar$LongToDateConverter@21f63842,java.lang.Long -&gt; java.util.Date : org.springframework.format.datetime.DateFormatterRegistrar$LongToDateConverter@3ae27639</span><br><span class="line">java.lang.Number -&gt; java.lang.Character : org.springframework.core.convert.support.NumberToCharacterConverter@37dca65c</span><br><span class="line">java.lang.Number -&gt; java.lang.Number : org.springframework.core.convert.support.NumberToNumberConverterFactory@5ad62efe</span><br><span class="line">java.lang.Number -&gt; java.lang.String : org.springframework.core.convert.support.ObjectToStringConverter@5dbb5323</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.DateTimeFormat java.lang.Long: org.springframework.format.datetime.DateTimeFormatAnnotationFormatterFactory@3de4aaed,java.lang.String -&gt; @org.springframework.format.annotation.NumberFormat java.lang.Long: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.DateTimeFormat java.time.LocalDate: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.lang.String -&gt; java.time.LocalDate: org.springframework.format.datetime.standard.TemporalAccessorParser@1a482c16</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.DateTimeFormat java.time.LocalDateTime: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.lang.String -&gt; java.time.LocalDateTime: org.springframework.format.datetime.standard.TemporalAccessorParser@726b4b72</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.DateTimeFormat java.time.LocalTime: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.lang.String -&gt; java.time.LocalTime: org.springframework.format.datetime.standard.TemporalAccessorParser@7d025d62</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.DateTimeFormat java.time.OffsetDateTime: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.lang.String -&gt; java.time.OffsetDateTime: org.springframework.format.datetime.standard.TemporalAccessorParser@7b82b59</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.DateTimeFormat java.time.OffsetTime: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.lang.String -&gt; java.time.OffsetTime: org.springframework.format.datetime.standard.TemporalAccessorParser@5d6bf8bc</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.DateTimeFormat java.time.ZonedDateTime: org.springframework.format.datetime.standard.Jsr310DateTimeFormatAnnotationFormatterFactory@13c06099,java.lang.String -&gt; java.time.ZonedDateTime: org.springframework.format.datetime.standard.TemporalAccessorParser@4100b1dd</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.DateTimeFormat java.util.Calendar: org.springframework.format.datetime.DateTimeFormatAnnotationFormatterFactory@3de4aaed</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.NumberFormat java.lang.Byte: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.NumberFormat java.lang.Double: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.NumberFormat java.lang.Float: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.NumberFormat java.lang.Integer: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.NumberFormat java.lang.Short: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.NumberFormat java.math.BigDecimal: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">java.lang.String -&gt; @org.springframework.format.annotation.NumberFormat java.math.BigInteger: org.springframework.format.number.NumberFormatAnnotationFormatterFactory@806d8b</span><br><span class="line">java.lang.String -&gt; java.lang.Boolean : org.springframework.core.convert.support.StringToBooleanConverter@3dd765a2</span><br><span class="line">java.lang.String -&gt; java.lang.Character : org.springframework.core.convert.support.StringToCharacterConverter@4b28d17b</span><br><span class="line">java.lang.String -&gt; java.lang.Enum : org.springframework.core.convert.support.StringToEnumConverterFactory@5a85577c</span><br><span class="line">java.lang.String -&gt; java.lang.Number : org.springframework.core.convert.support.StringToNumberConverterFactory@4a4bac52</span><br><span class="line">java.lang.String -&gt; java.nio.charset.Charset : org.springframework.core.convert.support.StringToCharsetConverter@77b7395f</span><br><span class="line">java.lang.String -&gt; java.time.Duration: org.springframework.format.datetime.standard.DurationFormatter@223f8ade</span><br><span class="line">java.lang.String -&gt; java.time.Instant: org.springframework.format.datetime.standard.InstantFormatter@744a1e70</span><br><span class="line">java.lang.String -&gt; java.time.MonthDay: org.springframework.format.datetime.standard.MonthDayFormatter@48e0bd1</span><br><span class="line">java.lang.String -&gt; java.time.Period: org.springframework.format.datetime.standard.PeriodFormatter@326e1143</span><br><span class="line">java.lang.String -&gt; java.time.YearMonth: org.springframework.format.datetime.standard.YearMonthFormatter@2013283d</span><br><span class="line">java.lang.String -&gt; java.util.Currency : org.springframework.core.convert.support.StringToCurrencyConverter@73d62889</span><br><span class="line">java.lang.String -&gt; java.util.Date: cn.floyd.pw.flow.converter.ApplicationConversionServiceFactoryBean$2@c01b01e,java.lang.String -&gt; java.util.Date : cn.floyd.pw.flow.converter.ApplicationConversionServiceFactoryBean$1@bda7edf,java.lang.String -&gt; @org.springframework.format.annotation.DateTimeFormat java.util.Date: org.springframework.format.datetime.DateTimeFormatAnnotationFormatterFactory@3de4aaed</span><br><span class="line">java.lang.String -&gt; java.util.Locale : org.springframework.core.convert.support.StringToLocaleConverter@15f3ecb1</span><br><span class="line">java.lang.String -&gt; java.util.Properties : org.springframework.core.convert.support.StringToPropertiesConverter@1734f8d8</span><br><span class="line">java.lang.String -&gt; java.util.TimeZone : org.springframework.core.convert.support.StringToTimeZoneConverter@219e655b</span><br><span class="line">java.lang.String -&gt; java.util.UUID : org.springframework.core.convert.support.StringToUUIDConverter@7a2a1350</span><br><span class="line">java.nio.charset.Charset -&gt; java.lang.String : org.springframework.core.convert.support.ObjectToStringConverter@79cac565</span><br><span class="line">java.time.Duration -&gt; java.lang.String : org.springframework.format.datetime.standard.DurationFormatter@223f8ade</span><br><span class="line">java.time.Instant -&gt; java.lang.Long : org.springframework.format.datetime.standard.DateTimeConverters$InstantToLongConverter@bbf9adc</span><br><span class="line">java.time.Instant -&gt; java.lang.String : org.springframework.format.datetime.standard.InstantFormatter@744a1e70</span><br><span class="line">java.time.LocalDateTime -&gt; java.time.LocalDate : org.springframework.format.datetime.standard.DateTimeConverters$LocalDateTimeToLocalDateConverter@224c05f6</span><br><span class="line">java.time.LocalDateTime -&gt; java.time.LocalTime : org.springframework.format.datetime.standard.DateTimeConverters$LocalDateTimeToLocalTimeConverter@bb6fc38</span><br><span class="line">java.time.MonthDay -&gt; java.lang.String : org.springframework.format.datetime.standard.MonthDayFormatter@48e0bd1</span><br><span class="line">java.time.OffsetDateTime -&gt; java.time.Instant : org.springframework.format.datetime.standard.DateTimeConverters$OffsetDateTimeToInstantConverter@7e4083f</span><br><span class="line">java.time.OffsetDateTime -&gt; java.time.LocalDate : org.springframework.format.datetime.standard.DateTimeConverters$OffsetDateTimeToLocalDateConverter@1e188fca</span><br><span class="line">java.time.OffsetDateTime -&gt; java.time.LocalDateTime : org.springframework.format.datetime.standard.DateTimeConverters$OffsetDateTimeToLocalDateTimeConverter@79b804b1</span><br><span class="line">java.time.OffsetDateTime -&gt; java.time.LocalTime : org.springframework.format.datetime.standard.DateTimeConverters$OffsetDateTimeToLocalTimeConverter@178638ba</span><br><span class="line">java.time.OffsetDateTime -&gt; java.time.ZonedDateTime : org.springframework.format.datetime.standard.DateTimeConverters$OffsetDateTimeToZonedDateTimeConverter@5dd8aa91</span><br><span class="line">java.time.Period -&gt; java.lang.String : org.springframework.format.datetime.standard.PeriodFormatter@326e1143</span><br><span class="line">java.time.YearMonth -&gt; java.lang.String : org.springframework.format.datetime.standard.YearMonthFormatter@2013283d</span><br><span class="line">java.time.ZoneId -&gt; java.util.TimeZone : org.springframework.core.convert.support.ZoneIdToTimeZoneConverter@375fe360</span><br><span class="line">java.time.ZonedDateTime -&gt; java.time.Instant : org.springframework.format.datetime.standard.DateTimeConverters$ZonedDateTimeToInstantConverter@5b6ff572</span><br><span class="line">java.time.ZonedDateTime -&gt; java.time.LocalDate : org.springframework.format.datetime.standard.DateTimeConverters$ZonedDateTimeToLocalDateConverter@44caea49</span><br><span class="line">java.time.ZonedDateTime -&gt; java.time.LocalDateTime : org.springframework.format.datetime.standard.DateTimeConverters$ZonedDateTimeToLocalDateTimeConverter@748fb300</span><br><span class="line">java.time.ZonedDateTime -&gt; java.time.LocalTime : org.springframework.format.datetime.standard.DateTimeConverters$ZonedDateTimeToLocalTimeConverter@362e6386</span><br><span class="line">java.time.ZonedDateTime -&gt; java.time.OffsetDateTime : org.springframework.format.datetime.standard.DateTimeConverters$ZonedDateTimeToOffsetDateTimeConverter@4864c695</span><br><span class="line">java.time.ZonedDateTime -&gt; java.util.Calendar : org.springframework.core.convert.support.ZonedDateTimeToCalendarConverter@53757723</span><br><span class="line">java.util.Calendar -&gt; java.lang.Long : org.springframework.format.datetime.DateFormatterRegistrar$CalendarToLongConverter@3effd16f,java.util.Calendar -&gt; java.lang.Long : org.springframework.format.datetime.DateFormatterRegistrar$CalendarToLongConverter@6625da72</span><br><span class="line">java.util.Calendar -&gt; java.time.Instant : org.springframework.format.datetime.standard.DateTimeConverters$CalendarToInstantConverter@3ea63a04</span><br><span class="line">java.util.Calendar -&gt; java.time.LocalDate : org.springframework.format.datetime.standard.DateTimeConverters$CalendarToLocalDateConverter@311b3b</span><br><span class="line">java.util.Calendar -&gt; java.time.LocalDateTime : org.springframework.format.datetime.standard.DateTimeConverters$CalendarToLocalDateTimeConverter@b827cbe</span><br><span class="line">java.util.Calendar -&gt; java.time.LocalTime : org.springframework.format.datetime.standard.DateTimeConverters$CalendarToLocalTimeConverter@27334ef2</span><br><span class="line">java.util.Calendar -&gt; java.time.OffsetDateTime : org.springframework.format.datetime.standard.DateTimeConverters$CalendarToOffsetDateTimeConverter@18a5b69c</span><br><span class="line">java.util.Calendar -&gt; java.time.ZonedDateTime : org.springframework.format.datetime.standard.DateTimeConverters$CalendarToZonedDateTimeConverter@2181b391</span><br><span class="line">java.util.Calendar -&gt; java.util.Date : org.springframework.format.datetime.DateFormatterRegistrar$CalendarToDateConverter@43409a9e,java.util.Calendar -&gt; java.util.Date : org.springframework.format.datetime.DateFormatterRegistrar$CalendarToDateConverter@25a7d510</span><br><span class="line">java.util.Currency -&gt; java.lang.String : org.springframework.core.convert.support.ObjectToStringConverter@59874f76</span><br><span class="line">java.util.Date -&gt; java.lang.Long : org.springframework.format.datetime.DateFormatterRegistrar$DateToLongConverter@2d72afcb,java.util.Date -&gt; java.lang.Long : org.springframework.format.datetime.DateFormatterRegistrar$DateToLongConverter@60b0c620</span><br><span class="line">java.util.Date -&gt; java.lang.String : cn.floyd.pw.flow.converter.ApplicationConversionServiceFactoryBean$2@c01b01e,@org.springframework.format.annotation.DateTimeFormat java.util.Date -&gt; java.lang.String: org.springframework.format.datetime.DateTimeFormatAnnotationFormatterFactory@3de4aaed</span><br><span class="line">java.util.Date -&gt; java.util.Calendar : org.springframework.format.datetime.DateFormatterRegistrar$DateToCalendarConverter@635f0388,java.util.Date -&gt; java.util.Calendar : org.springframework.format.datetime.DateFormatterRegistrar$DateToCalendarConverter@7b746ecc</span><br><span class="line">java.util.Locale -&gt; java.lang.String : org.springframework.core.convert.support.ObjectToStringConverter@572faa97</span><br><span class="line">java.util.Properties -&gt; java.lang.String : org.springframework.core.convert.support.PropertiesToStringConverter@387ae6b6</span><br><span class="line">java.util.UUID -&gt; java.lang.String : org.springframework.core.convert.support.ObjectToStringConverter@19b50f9c</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/Spring%20Webflow%20-%20EL%E8%A1%A8%E8%BE%BE%E5%BC%8F-springwebflow-el%E8%A1%A8%E8%BE%BE%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Spring%20Webflow%20-%20EL%E8%A1%A8%E8%BE%BE%E5%BC%8F-springwebflow-el%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="post-title-link" itemprop="url">Spring Webflow - EL表达式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-08 20:00:00" itemprop="dateCreated datePublished" datetime="2018-09-08T20:00:00+08:00">2018-09-08</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:27:11" itemprop="dateModified" datetime="2021-02-16T23:27:11+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring-Webflow/" itemprop="url" rel="index"><span itemprop="name">Spring | Webflow</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<ol>
<li>文章中内容并没有全部验证，仅作为参考</li>
<li>上下文一起看，才能明白其中的意思</li>
</ol>
</blockquote>
<h1 id="Web-Flow中EL表达式作用"><a href="#Web-Flow中EL表达式作用" class="headerlink" title="Web Flow中EL表达式作用"></a>Web Flow中EL表达式作用</h1><p>web-flow使用EL表达式访问flow的model和调用方法。在web-flow中EL表达式主要有如下四种用途</p>
<ul>
<li><p>访问客户端(浏览器)数据，比如request的parameter</p>
</li>
<li><p>访问web-flow的RequestContex，比如flowScope和currentEvent等</p>
</li>
<li><p>调用Spring管理的bean的方法</p>
</li>
<li><p>解析表达式(相对于普通表达式)可以解析注入子流程id，view的名称，<br>##EL表达式分类<br>web-flow中EL表达式按照按使用形式分为两类</p>
</li>
<li><p>标准表达式<br>不需要加#{}，直接按照一般程序一样写就行了，如果硬要加#{}，则会报错</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 调用searchCriteria对象的nextPage()方法</span><br><span class="line">// searchCriteria对象可以是Spring中的一个bean，也可以是flow上下文中的一个变量</span><br><span class="line">&lt;evaluate expression=&quot;searchCriteria.nextPage()&quot; /&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>模板表达式<br>需要加#{}，这种表达式允许将常量和表达式写在一起，如下这种，最后的view名称是拼出来的</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view-state id=&quot;error&quot; view=&quot;error-#&#123;externalContext.locale&#125;.xhtml&quot; /&gt;</span><br></pre></td></tr></table></figure>
<h1 id="Web-Flow支持的EL表达式"><a href="#Web-Flow支持的EL表达式" class="headerlink" title="Web Flow支持的EL表达式"></a>Web Flow支持的EL表达式</h1><p>Web Flow支持spring EL表达式，Unified表达式，以及OGNL表达式</p>
<ul>
<li>Spring EL<br>从web-flow 2.1开始就使用了Spring EL表达式，该表达式在Spring的全系列产品中都可以使用。使用它只需要在类路径下包含一个单独的jar包<code>org.springframework.expression</code>。 并且如果以前使用的EL表达式或者ognl的表达式，还需要将他们的包去除。</li>
<li>Unified EL<br>在we-flow 2.0时期默认使用的是统一EL表达式，<code>org.jboss.el</code>提供，该包还需要j2ee提供的<code>el-api</code>(一般的容器都会自动提供)。虽然目前版本的Spring EL表达式是默认和推荐使用的，但也可以手动更换为Unified EL表达式。只需加上如下配置即可</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 该配置方法在前面讲配置时给过示例</span><br><span class="line">&lt;webflow:flow-builder-services expression-parser=&quot;expressionParser&quot;/&gt;</span><br><span class="line">&lt;bean id=&quot;expressionParser&quot; class=&quot;org.springframework.webflow.expression.el.WebFlowELExpressionParser&quot;&gt;</span><br><span class="line">	&lt;constructor-arg&gt;</span><br><span class="line">		  &lt;bean class=&quot;org.jboss.el.ExpressionFactoryImpl&quot; /&gt;</span><br><span class="line">	&lt;/constructor-arg&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>OGNL</li>
</ul>
<p>2.4及以后的版本中，已经非常不推荐使用OGNL表达式了。那还是在web-flow 1.0时代标配的是OGNL表达式，如果硬要使用OGNL表达式，还是可以配置，方法请参考<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-webflow/docs/2.4.5.RELEASE/reference/html/el.html#el-ognl">教程</a><br>##EL表达式迁移(Unified EL -&gt; Spring EL)<br>从Unified EL表达式和OGNL表达式迁移到Spring EL表达式需要注意以下几点</p>
<ul>
<li>EL表达式的符号从${ }变化成了#{ }</li>
<li>针对current Event的比较由<code>#&#123;currentEvent == &#39;submit&#39;&#125;</code> 要换成 <code>#&#123;currentEvent.id == &#39;submit&#39;&#125;</code></li>
<li>直接解析属性如<code>#&#123;currentUser.name&#125;</code> 可能造成空指针异常，以前的检查方式是：<code>#&#123;currentUser != null ? currentUser.name : null&#125;</code> ， 目前更好的方式：<code>#&#123;currentUser?.name&#125;</code></li>
</ul>
<p>更加详细的EL相关内容，看<a target="_blank" rel="noopener" href="http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html#expressions-language-ref">这里</a></p>
<h1 id="一些内建的Spring-EL变量"><a href="#一些内建的Spring-EL变量" class="headerlink" title="一些内建的Spring EL变量"></a>一些内建的Spring EL变量</h1><p>内建代表系统自动创建并管理，用户可以直接通过EL表达式访问</p>
<h2 id="重要原则"><a href="#重要原则" class="headerlink" title="重要原则"></a>重要原则</h2><p>只有当分配一个新的变量时才会用到默认存在的作用域变量(flowScope, viewScope, requestScope, etc), 后面使用时就不需要指定作用域变量了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 声明modelMap变量，必须显式指定作用域 --&gt;</span><br><span class="line">&lt;evaluate expression=&quot;flowController.performSearch(searchForm)&quot; result=&quot;flashScope.modelMap&quot;/&gt;</span><br><span class="line">... ...</span><br><span class="line">&lt;!-- 使用modelMap变量不用指定作用域 --&gt;</span><br><span class="line">&lt;evaluate expression=&quot;flowController.performResult(modelMap)&quot;/&gt;</span><br></pre></td></tr></table></figure>
<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p>前面在讲变量时已经讲过作用域(看<a target="_blank" rel="noopener" href="https://blog.csdn.net/zou8944/article/details/82502430">这里</a>)，这里提一下，不要忘了。</p>
<h2 id="内建变量穷举"><a href="#内建变量穷举" class="headerlink" title="内建变量穷举"></a>内建变量穷举</h2><ul>
<li>requestParameters<br>获取客户端的请求参数</li>
<li>currentEvent<br>可以获取当前的Event对象</li>
<li>currentUser<br>获取当前被授权的用户，即Principal对象</li>
<li>messageContext<br>可以访问当前的上下文，包括错误和成功的信息，详见MessageContext的javaDoc</li>
<li>resourceBundle<br>访问资源文件</li>
<li>flowRequestContext<br>访问当前flow的RequestContext对象 ，它是当前flow的请求信息对象，详见RequestContext的javaDoc</li>
<li>flowExecutionContext<br>访问FlowExecutionContext对象，存储了当前flow的状态</li>
<li>flowExecutionUrl<br>访问当前view的相对路径，可以在view-state中指定的jsp中进行使用</li>
<li>externalContext<br>可以获取客户端的环境信息，包括sessino属性，详见ExternalContext JavaDoc<br>##Spring EL查找变量的逻辑<br>当使用flow中声明的变量时，并不需要指定作用域，web flow会自动从各作用域，按照如下顺序进行查找，如果找不到，则报<code>EvaluationException</code>异常</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">requestScope -&gt; flashScope -&gt; viewScope -&gt; flowScope -&gt; conversationScope</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/Spring%20Webflow%20-%20Action-springwebflow-action/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Spring%20Webflow%20-%20Action-springwebflow-action/" class="post-title-link" itemprop="url">Spring Webflow - Action</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-08 11:00:00" itemprop="dateCreated datePublished" datetime="2018-09-08T11:00:00+08:00">2018-09-08</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:27:25" itemprop="dateModified" datetime="2021-02-16T23:27:25+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring-Webflow/" itemprop="url" rel="index"><span itemprop="name">Spring | Webflow</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="action-state"><a href="#action-state" class="headerlink" title="action-state"></a>action-state</h1><h2 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h2><p>该状态只执行操作，然后根据操作的结果转移到其他state。可以有多个操作，他们依次执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;action-state id=&quot;moreAnswersNeeded&quot;&gt;</span><br><span class="line">	&lt;evaluate expression=&quot;interview.moreAnswersNeeded()&quot; /&gt;</span><br><span class="line">	&lt;transition on=&quot;yes&quot; to=&quot;answerQuestions&quot; /&gt;</span><br><span class="line">	&lt;transition on=&quot;no&quot; to=&quot;finish&quot; /&gt;</span><br><span class="line">&lt;/action-state&gt;</span><br></pre></td></tr></table></figure>
<h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><p>在action-state中调用普通java对象的方法，这些方法返回的只是一般的值，但是transition标签需要Event来触发，因此web-flow会将这个普通返回值转换为Event对象，具体转换情况如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">方法返回值类型			映射出来的EventId</span><br><span class="line">java.lang.String		直接以字符串的值作为id</span><br><span class="line">java.lang.Boolean		yes (for true), no (for false)</span><br><span class="line">java.lang.Enum			the Enum name</span><br><span class="line">any other type	    	success</span><br></pre></td></tr></table></figure>
<h2 id="action-state的操作"><a href="#action-state的操作" class="headerlink" title="action-state的操作"></a>action-state的操作</h2><p>action-state可以有三种方式进行执行操作</p>
<ul>
<li>调用POJO</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;evaluate expression=&quot;pojoAction.method(flowRequestContext)&quot; /&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class PojoAction &#123;</span><br><span class="line">	public String method(RequestContext context) &#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>实现Action接口，直接调用该action</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;evaluate expression=&quot;customAction&quot; /&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class CustomAction implements Action &#123;</span><br><span class="line">	public Event execute(RequestContext context) &#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>实现MultiAction接口，可以定义多个一连串的方法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;evaluate expression=&quot;multiAction.actionMethod1&quot; /&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class CustomMultiAction extends MultiAction &#123;</span><br><span class="line">	public Event actionMethod1(RequestContext context) &#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public Event actionMethod2(RequestContext context) &#123;</span><br><span class="line">		...</span><br><span class="line">	&#125;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="action的异常处理"><a href="#action的异常处理" class="headerlink" title="action的异常处理"></a>action的异常处理</h2><ul>
<li>POJO类action的处理方式<br>发生异常时，返回相应的字符串，会映射成Event，在transition中响应就可以了，和普通方法正常返回一样</li>
<li>MultiAction的处理方式<br>发生异常时，返回Event对象</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class BookingAction extends MultiAction &#123;</span><br><span class="line">	public Event makeBooking(RequestContext context) &#123;</span><br><span class="line">		   try &#123;</span><br><span class="line">			   Booking booking = (Booking) context.getFlowScope().get(&quot;booking&quot;);</span><br><span class="line">			   BookingConfirmation confirmation = bookingService.make(booking);</span><br><span class="line">			   context.getFlowScope().put(&quot;confirmation&quot;, confirmation);</span><br><span class="line">			   return success();</span><br><span class="line">		   &#125; catch (RoomNotAvailableException e) &#123;</span><br><span class="line">			   context.getMessageContext().addMessage(new MessageBuilder().error().</span><br><span class="line">				   .defaultText(&quot;No room is available at this hotel&quot;).build());</span><br><span class="line">			   return error();</span><br><span class="line">		   &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用<code>exception-handler</code>属性，定义异常处理器</li>
</ul>
<h2 id="decision-state"><a href="#decision-state" class="headerlink" title="decision-state"></a>decision-state</h2><p>decision-state是action-state的一种简单替代，在if/else情况时比较好用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;decision-state id=&quot;moreAnswersNeeded&quot;&gt;</span><br><span class="line">	&lt;if test=&quot;interview.moreAnswersNeeded()&quot; then=&quot;answerQuestions&quot; else=&quot;finish&quot; /&gt;</span><br><span class="line">&lt;/decision-state&gt;</span><br></pre></td></tr></table></figure>
<h2 id="action相关标签"><a href="#action相关标签" class="headerlink" title="action相关标签"></a>action相关标签</h2><ol>
<li><code>&lt;on-start&gt;</code>    flow开始时执行</li>
<li><code>&lt;on-entry&gt;</code>    state进入时执行</li>
<li><code>&lt;on-exit&gt;</code>    state退出时执行</li>
<li><code>&lt;on-end&gt;</code>    flow结束时执行</li>
<li><code>&lt;on-render&gt;</code>view-state中使用，渲染前执行</li>
<li><code>&lt;transition&gt;</code>    在转移前执行<h2 id="命名的action"><a href="#命名的action" class="headerlink" title="命名的action"></a>命名的action</h2>如下展示了一个action-state下多个操作执行，为每个操作命名，第二个操作成功后进行转移操作</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;action-state id=&quot;doTwoThings&quot;&gt;</span><br><span class="line">	&lt;evaluate expression=&quot;service.thingOne()&quot;&gt;</span><br><span class="line">		&lt;attribute name=&quot;name&quot; value=&quot;thingOne&quot; /&gt;</span><br><span class="line">	&lt;/evaluate&gt;</span><br><span class="line">	&lt;evaluate expression=&quot;service.thingTwo()&quot;&gt;</span><br><span class="line">		&lt;attribute name=&quot;name&quot; value=&quot;thingTwo&quot; /&gt;</span><br><span class="line">	&lt;/evaluate&gt;</span><br><span class="line">	&lt;transition on=&quot;thingTwo.success&quot; to=&quot;showResults&quot; /&gt;</span><br><span class="line">&lt;/action-state&gt;</span><br></pre></td></tr></table></figure>
<h1 id="向客户端发送流信息"><a href="#向客户端发送流信息" class="headerlink" title="向客户端发送流信息"></a>向客户端发送流信息</h1><h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><p>客户端请求一个图片文件，此时我们需要直接操作httpresponse进行图片的响应，而不是渲染view。</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>通过ExternalContext获取HttpResponse，将图片写入，然后操作ExternalContext对象记录response完成，这样web-flow就不会再渲染view，而是直接返回给浏览器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class PrintBoardingPassAction extends AbstractAction &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected Event doExecute(RequestContext context) throws Exception &#123;</span><br><span class="line">        HttpServletResponse response = (HttpServletResponse)context.getExternalContext().getNativeResponse();</span><br><span class="line">        OutputStream os = response.getOutputStream();</span><br><span class="line">        // 在这里操作os，写入流数据</span><br><span class="line">        os.close();</span><br><span class="line">        context.getExternalContext().recordResponseComplete();</span><br><span class="line">        return success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/Spring%20Webflow%20-%20%E5%9F%BA%E7%A1%80-springwebflow-%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Spring%20Webflow%20-%20%E5%9F%BA%E7%A1%80-springwebflow-%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">Spring Webflow - 基础</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-07 21:33:00" itemprop="dateCreated datePublished" datetime="2018-09-07T21:33:00+08:00">2018-09-07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:27:34" itemprop="dateModified" datetime="2021-02-16T23:27:34+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring-Webflow/" itemprop="url" rel="index"><span itemprop="name">Spring | Webflow</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h1><p>Web Flow将一个流程分为若干个状态(可以理解为步骤)，每个流程由若干个状态组成，通过特性的方式在步骤之间进行跳转，协同完成整个流程。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/Spring%20Webflow%20-%20%E5%9F%BA%E7%A1%80-springwebflow-%E5%9F%BA%E7%A1%80/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zou8944.com/Spring%20Webflow%20-%20%E7%AC%AC%E4%B8%80%E4%B8%AAFlow-springwebflow-%E7%AC%AC%E4%B8%80%E4%B8%AAflow/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="果冻 | Jelly">
      <meta itemprop="description" content="Beat Jelly; Hit Jelly; Kill Jelly.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="果冻 | Jelly">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/Spring%20Webflow%20-%20%E7%AC%AC%E4%B8%80%E4%B8%AAFlow-springwebflow-%E7%AC%AC%E4%B8%80%E4%B8%AAflow/" class="post-title-link" itemprop="url">Spring Webflow - 第一个Flow</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-09-06 23:00:00" itemprop="dateCreated datePublished" datetime="2018-09-06T23:00:00+08:00">2018-09-06</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-16 23:27:41" itemprop="dateModified" datetime="2021-02-16T23:27:41+08:00">2021-02-16</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring-Webflow/" itemprop="url" rel="index"><span itemprop="name">Spring | Webflow</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>在学习每一门新语言时，第一个程序往往是Hello World。这里我们写一个非常简单的flow，使用常用标签，在深入讲解之前有一个感官上的认识</p>
</blockquote>
<h1 id="需求说明"><a href="#需求说明" class="headerlink" title="需求说明"></a>需求说明</h1><p>假设有如下简单流程：要求程序启动，显式输入界面，用户输入信息后，点击提交按钮，后台查询数据库，然后显式查询结果界面，中间任何步骤出错，都重新返回输入界面，并显示错误信息。流程大体如下。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/Spring%20Webflow%20-%20%E7%AC%AC%E4%B8%80%E4%B8%AAFlow-springwebflow-%E7%AC%AC%E4%B8%80%E4%B8%AAflow/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">果冻 | Jelly</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
